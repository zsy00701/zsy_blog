# 数据存储说明

## 📁 存储方式：文件系统（不是传统数据库）

你的博客**不使用传统数据库**（如 MySQL、PostgreSQL），而是使用**本地文件系统**存储所有文章。

## 🗂️ 数据位置

所有文章都存储在本地目录：

```
/Users/zhoushengyao/blog/content/posts/
```

### 文件结构示例

```
content/posts/
├── hello-world.md          # 文章文件
├── getting-started.md
├── 科研学习/                # 分类文件夹
│   ├── ssh连接.md
│   └── 网络/
│       └── vpn配置.md
└── 生活随笔/
    └── 游记.md
```

## 🔍 工作原理

### 本地开发时

1. **读取文件**：代码从 `content/posts/` 目录读取所有 `.md` 文件
2. **解析内容**：使用 `gray-matter` 解析 frontmatter（标题、日期等）
3. **生成页面**：Next.js 在构建时生成静态 HTML 页面

### 部署后

1. **文件包含在 Git**：`content/posts/` 目录会随代码一起推送到 GitHub
2. **构建时读取**：Vercel/Netlify 在构建时会读取这些文件
3. **生成静态页面**：所有文章被预渲染成静态 HTML
4. **CDN 分发**：静态页面通过 CDN 全球分发

## ✅ 优势

### 1. **简单直接**
- 不需要数据库配置
- 不需要数据库迁移
- 文件就是数据，一目了然

### 2. **版本控制**
- 所有文章都在 Git 中
- 可以追踪每篇文章的修改历史
- 可以回退到任意版本

### 3. **备份简单**
- 备份整个 `content/posts/` 目录即可
- 或者直接备份 Git 仓库

### 4. **迁移方便**
- 复制文件夹即可迁移
- 不依赖数据库

### 5. **性能优秀**
- 静态生成，加载速度快
- 不需要数据库查询

## 📝 如何管理内容

### 添加文章

**方法一：直接创建文件**
```bash
# 在 content/posts/ 目录下创建 .md 文件
vim content/posts/新文章.md
```

**方法二：使用脚本**
```bash
npm run add-post
```

### 修改文章

直接用编辑器打开 `content/posts/` 下的 `.md` 文件修改即可。

### 删除文章

删除对应的 `.md` 文件即可。

### 组织分类

通过文件夹结构组织：
```
content/posts/
├── 分类1/
│   └── 文章.md
└── 分类2/
    └── 子分类/
        └── 文章.md
```

## 🚀 部署后的数据同步

### 工作流程

1. **本地修改**：在本地 `content/posts/` 添加/修改文件
2. **提交到 Git**：
   ```bash
   git add content/posts/
   git commit -m "Add new post"
   git push
   ```
3. **自动部署**：Vercel/Netlify 检测到更新
4. **重新构建**：平台读取新的文件，重新生成页面
5. **自动上线**：新内容自动上线（1-2 分钟）

### 重要提示

⚠️ **文件必须提交到 Git 才能部署**

- 如果文件只在本地，没有 `git add` 和 `git push`，部署后不会显示
- 确保所有 `.md` 文件都在 Git 仓库中

## 🔄 与数据库的对比

| 特性 | 文件系统（当前） | 传统数据库 |
|------|----------------|-----------|
| 存储位置 | `content/posts/*.md` | MySQL/PostgreSQL |
| 备份方式 | 复制文件夹 | 导出 SQL |
| 版本控制 | Git 原生支持 | 需要额外工具 |
| 查询速度 | 构建时读取，运行时静态 | 需要数据库查询 |
| 迁移难度 | 复制文件夹 | 需要导出导入 |
| 管理界面 | 文件编辑器 | 需要开发管理后台 |
| 适用场景 | 个人博客、文档站 | 动态内容、用户数据 |

## 💡 总结

- ✅ **数据在本地**：`content/posts/` 目录
- ✅ **不是数据库**：使用文件系统存储
- ✅ **部署时包含**：文件会随代码一起部署
- ✅ **构建时读取**：部署平台在构建时读取文件
- ✅ **生成静态页面**：所有内容预渲染成 HTML

这种方式的核心理念：**文件即数据，简单而强大**！

